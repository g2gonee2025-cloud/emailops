# ============================================================================
# EmailOps Configuration Template
# ============================================================================
# Copy this file to .env and fill in your actual values.
#
# IMPORTANT:
# - All non-sensitive configs are REQUIRED (no fallback values)
# - Sensitive configs (API keys) are optional but required for specific features
# - The application will fail fast if required variables are missing
# ============================================================================

# ============================================================================
# DIRECTORY CONFIGURATION (Required)
# ============================================================================
INDEX_DIRNAME=_index
CHUNK_DIRNAME=_chunks
SECRETS_DIR=secrets

# ============================================================================
# PROCESSING CONFIGURATION (Required)
# ============================================================================
CHUNK_SIZE=1600
CHUNK_OVERLAP=200
EMBED_BATCH=64
NUM_WORKERS=4

# ============================================================================
# EMBEDDING PROVIDER CONFIGURATION (Required)
# ============================================================================
EMBED_PROVIDER=vertex
VERTEX_EMBED_MODEL=gemini-embedding-001
VERTEX_MODEL=gemini-2.5-pro

# Optional: Specify embedding dimensions (if supported by model)
# VERTEX_EMBED_DIM=768
# VERTEX_OUTPUT_DIM=768

# ============================================================================
# GCP CONFIGURATION (Required)
# ============================================================================
GCP_REGION=us-central1
VERTEX_LOCATION=us-central1

# Optional: Explicitly set GCP project (otherwise auto-discovered from credentials)
# GCP_PROJECT=your-project-id

# ============================================================================
# RETRY & RATE LIMITING (Required)
# ============================================================================
VERTEX_MAX_RETRIES=5
VERTEX_BACKOFF_INITIAL=4.0
VERTEX_BACKOFF_MAX=60.0
API_RATE_LIMIT=60

# ============================================================================
# SEARCH & DRAFT CONFIGURATION (Required)
# ============================================================================
HALF_LIFE_DAYS=30
RECENCY_BOOST_STRENGTH=1.0
CANDIDATES_MULTIPLIER=3
SIM_THRESHOLD_DEFAULT=0.30
REPLY_TOKENS_TARGET_DEFAULT=20000
FRESH_TOKENS_TARGET_DEFAULT=10000
CONTEXT_SNIPPET_CHARS=1600
CHARS_PER_TOKEN=3.8
BOOSTED_SCORE_CUTOFF=0.30
ATTACH_MAX_MB=15.0
MIN_AVG_SCORE=0.2
RERANK_ALPHA=0.35
MMR_LAMBDA=0.70
MMR_K_CAP=250

# ============================================================================
# EMAIL CONFIGURATION (Required)
# ============================================================================
REPLY_POLICY=reply_all
PERSONA=expert insurance CSR
SENDER_LOCKED_NAME=Your Name
SENDER_LOCKED_EMAIL=your.email@example.com
MESSAGE_ID_DOMAIN=example.com

# Optional: Reply-to address and allowed senders
# SENDER_REPLY_TO=reply-to@example.com
# ALLOWED_SENDERS=user1@example.com,user2@example.com

# ============================================================================
# SUMMARIZER CONFIGURATION (Required)
# ============================================================================
SUMMARIZER_VERSION=2.2-facts-ledger
SUMMARIZER_THREAD_MAX_CHARS=16000
SUMMARIZER_CRITIC_MAX_CHARS=5000
SUMMARIZER_IMPROVE_MAX_CHARS=8000
SUMMARIZER_MAX_PARTICIPANTS=25
SUMMARIZER_MAX_SUMMARY_POINTS=25
SUMMARIZER_MAX_NEXT_ACTIONS=50
SUMMARIZER_MAX_FACT_ITEMS=50
SUMMARIZER_SUBJECT_MAX_LEN=100
AUDIT_TARGET_MIN_SCORE=8

# ============================================================================
# PROCESSING LIMITS (Required)
# ============================================================================
MAX_ATTACHMENT_TEXT_CHARS=500000
EXCEL_MAX_CELLS=200000
SKIP_ATTACHMENT_OVER_MB=0
MAX_INDEXABLE_FILE_MB=50.0
MAX_INDEXABLE_CHARS=5000000
MAX_CHAT_SNIPPETS=50
MAX_CHAT_CONTEXT_MB=10.0

# ============================================================================
# SYSTEM CONFIGURATION (Required)
# ============================================================================
LOG_LEVEL=INFO
COMMAND_TIMEOUT=3600
ACTIVE_WINDOW_SECONDS=120
FILE_ENCODING_CACHE_SIZE=1024
PIP_TIMEOUT=300

# ============================================================================
# SECURITY SETTINGS (Required)
# ============================================================================
ALLOW_PARENT_TRAVERSAL=false
ALLOW_PROVIDER_OVERRIDE=false
FORCE_RENORM=false

# ============================================================================
# SENSITIVE CONFIGURATION (Optional - Only in .env)
# ============================================================================
# These should NEVER be committed to version control
# Only include the ones you need based on your provider choice

# GCP Credentials (auto-discovered from secrets/ folder if not set)
# GOOGLE_APPLICATION_CREDENTIALS=path/to/service-account.json

# OpenAI (only if EMBED_PROVIDER=openai)
# OPENAI_API_KEY=sk-...
# OPENAI_EMBED_MODEL=text-embedding-3-small

# Azure OpenAI (only if EMBED_PROVIDER=azure)
# AZURE_OPENAI_API_KEY=your-api-key
# AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com
# AZURE_OPENAI_DEPLOYMENT=your-deployment-name
# AZURE_OPENAI_API_VERSION=2024-02-01

# Cohere (only if EMBED_PROVIDER=cohere)
# COHERE_API_KEY=your-api-key
# COHERE_EMBED_MODEL=embed-english-v3.0
# COHERE_INPUT_TYPE=search_document

# HuggingFace (only if EMBED_PROVIDER=huggingface)
# HF_API_KEY=your-api-key
# HUGGINGFACE_API_KEY=your-api-key
# HF_EMBED_MODEL=BAAI/bge-large-en-v1.5

# Qwen (only if EMBED_PROVIDER=qwen)
# QWEN_API_KEY=your-api-key
# QWEN_BASE_URL=https://your-endpoint
# QWEN_EMBED_MODEL=Qwen/Qwen3-Embedding-8B
# QWEN_TIMEOUT=60

# Local Model (only if EMBED_PROVIDER=local)
# LOCAL_EMBED_MODEL=sentence-transformers/all-MiniLM-L6-v2

# ============================================================================
# OPTIONAL RUNTIME IDENTIFIERS
# ============================================================================
# RUN_ID=your-custom-run-id

# ============================================================================
# NOTES
# ============================================================================
# 1. All directory paths are relative to the project root
# 2. Service account JSON files should be placed in the secrets/ directory
# 3. The application will auto-discover all .json files in secrets/ folder
# 4. Multiple service accounts enable automatic project rotation on quota limits
# 5. If a required variable is missing, the application will fail with a clear error message
